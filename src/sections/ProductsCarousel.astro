---
import { PRODUCTS } from "../data/products";
import ProductCard from "../components/ProductCard.astro";

// Filtramos por categoría
const categories = ["anillos", "aretes", "collares", "pulseras"];
---

<section class="py-28 bg-gray-50">
  <div class="max-w-7xl mx-auto px-6 space-y-16">

    {categories.map((cat) => {
      const catProducts = PRODUCTS.filter(p => p.category === cat);
      if (catProducts.length === 0) return null;

      return (
        <div class="flex flex-col md:flex-row items-start gap-8">
          
          <!-- Info de la categoría -->
          <div class="md:w-1/3">
            <h2 class="text-3xl font-bold mb-4">
              {cat === "anillos" ? "Nueva Colección" : cat.charAt(0).toUpperCase() + cat.slice(1)}
            </h2>
            <p class="text-gray-700">
              {cat === "anillos" 
                ? "¡Descubre toda la colección de Pandora! Encuentra lo último en charms, anillos, pulseras, pendientes y collares de tendencia para crear tu propio estilo. Inspírate con esta selección de joyas."
                : "Explora nuestra selección de " + cat}
            </p>
          </div>

          <!-- Carrusel de productos -->
          <div class="md:w-2/3 relative">
            <div class="flex overflow-x-auto gap-6 scroll-smooth snap-x snap-mandatory">
              {catProducts.map(product => (
                <div class="snap-start flex-shrink-0 w-64">
                  <ProductCard
                    id={product.id}
                    name={product.name}
                    description={product.description}
                    price={product.price}
                    oldPrice={product.oldPrice}
                    image={product.image}
                    badge={product.badge}
                  />
                </div>
              ))}
            </div>

            <!-- Flechas -->
            <button
              class="absolute top-1/2 -left-4 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-700 rounded-full p-2 shadow"
              onclick="this.nextElementSibling.scrollBy({left: -300, behavior: 'smooth'})"
            >
              ‹
            </button>
            <button
              class="absolute top-1/2 -right-4 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-700 rounded-full p-2 shadow"
              onclick="this.previousElementSibling.scrollBy({left: 300, behavior: 'smooth'})"
            >
              ›
            </button>
          </div>

        </div>
      )
    })}
  </div>
</section>
